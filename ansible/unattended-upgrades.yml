---
# setup automatic security updates for servers

- hosts: all
  become: true

  tasks:
    - name: install unattended-upgrades
      apt:
        name: unattended-upgrades 
        state: present
        update_cache: yes

# copy config files

    - name: copy 50unattended-upgrades
      copy:
        src: files/50unattended-upgrades
        dest: /etc/apt/apt.conf.d/50unattended-upgrades
        owner: root
        group: root
        mode: '0644'

    - name: copy 20auto-upgrades
      copy:
        src: files/20auto-upgrades
        dest: /etc/apt/apt.conf.d/20auto-upgrades
        owner: root
        group: root
        mode: '0644'

    - name: copy listchanges
      copy:
        src: files/listchanges.conf
        dest: /etc/apt/listchanges.conf
        owner: root
        group: root
        mode: '0644'
